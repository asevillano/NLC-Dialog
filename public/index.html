<!DOCTYPE html>
<html>
<head>
<title id="title">Watson Dialog</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="icon" href="/images/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="css/style.css">
</head>
<body style="background-image:url(images/background.jpg)">

	
	<header id="banner" class="_demo--heading">	
		<div class="_demo--container" style="margin-top:7px">
			<a class="wordmark" href="http://www.ibm.com/smarterplanet/us/en/ibmwatson/developercloud/">
				<img src="images/banner.png" class="chat-box--avatar-img">			
			</a>
			<a id="bannerDescription" class="wordmark" href="http://www.ibm.com/smarterplanet/us/en/ibmwatson/developercloud/" style="margin-top:45px;margin-left:40%;font-size:1.2rem;font-weight: 1.95312em;color:blue; font-family:Arial">
				WATSON DIALOG
			</a>
		</div>
	</header>
	<div class="_demo--container">
		<article class="_demo--content base--article">
			<div class="_content--dialog">
				<div class="chat-window" style="background-color:white;margin-top:-40px;margin-left:5%;">
					<div class="chat-box">
						<div class="chat-box--pane">
							<div
								class="chat-box--item_WATSON chat-box--item chat-box--item_HIDDEN">
								<div class="chat-box--container">
									<div id="avatar"
										class="img-container chat-box--avatar chat-box--avatar_WATSON">
										<img src="images/avatar-watson.png"
											style="width: 100%; height: 65px"
											class="chat-box--avatar-img">
									</div>
									<div class="chat-box--message" style="font-size:0.9rem">
										<div class="chat-box--message-vertical">
											<p class="chat-box--message-text base--p base--ul"></p>
										</div>
									</div>
								</div>
							</div>
							<div
								class="chat-box--item_YOU chat-box--item chat-box--item_HIDDEN">
								<div class="chat-box--container" style="font-size:0.9rem">
									<div class="chat-box--message">
										<div class="chat-box--message-vertical">
											<p class="chat-box--message-text base--p base--ul"></p>
										</div>
									</div>
									<div
										class="img-container chat-box--avatar chat-box--avatar_YOU">
										<img src="images/icons/avatar-you.svg"
											class="chat-box--avatar-img">
									</div>
								</div>
							</div>
							<!-- adding extra space hack -->
							<div style="height: 15px; visibility: hidden; display: none;"></div>
							<div class="loader">
								<div class="loader--fallback">
									<img src="images/watson.gif" width="50" alt="">
								</div>
							</div>
						</div>
					</div>

					<input type="text" placeholder="Type a response and hit enter"
						value="" autocomplete="off"
						class="chat-window--message-input base--text-input">
				</div>
			</div>

			<div class="_content--data">
				<div class="tab-panels" role="tabpanel">
					<ul class="tab-panels--tab-list" role="tablist">
						<li class="tab-panels--tab-list-item base-li" role="presentation">
							<a class="tab-panels--tab base--a active" href="#data-panel"
							aria-controls="text" role="tab">Data</a>
						</li>
						<li class="tab-panels--tab-list-item base-li" role="presentation">
							<a class="tab-panels--tab base--a" href="#json-panel"
							aria-controls="json" role="tab">JSON</a>
						</li>
						<li class="tab-panels--tab-list-item base-li" role="presentation">
							<a class="tab-panels--tab base--a" href="#calls-panel"
							aria-controls="json" role="tab">Calls</a>
						</li>
					</ul>
					<div class="tab-panels--tab-content">
						<div id="data-panel" class="tab-panels--tab-pane active"
							role="tab-panel">
							<div class="base--textarea">
								<h6 class="base--h6">Information</h6>
								<div class="data--information"></div>
								<h6 class="base--h6">Profile</h6>
								<div class="data--profile"></div>
							</div>
						</div>
						<div id="json-panel" class="tab-panels--tab-pane" role="tab-panel">
							<textarea class="base--textarea"></textarea>
						</div>
						<div id="calls-panel" class="tab-panels--tab-pane"
							role="tab-panel" style="font-size: 0.8rem; height:400px; overflow-y:scroll">
							<div class="data--information"></div>
						</div>
					</div>
				</div>
			</div>

			<div class="separate-line" style="display:none"></div>
			<div class="baseDescription">
			  <h2 class="base--h2">Descripción</h2>

			  <div class="banner--service-description" style="color:white">
				<b>Versión 03:</b> Esta versión trabaja con 1 clasificador para determinar sobre qué aspecto
				del empadronamiento se está hablando.</br> El clasificador es llamado cuando el grado de 
				confianza en la respuesta es 0.</br>

				<p>
					<b>Ficheros desplegados:</b></br> 
					- NLC específico: 20160217_FAQ_padron_v165.csv</br> 
					- Dialog:  20160217_dialog_v15.xml</br>
				</p>
			</div>
			</div>
			
			<div class="configTab">
				<form id="uploadForm" enctype="multipart/form-data" action="/config" method="post">
				<div class="col-sm-2">
				<h2 style="color:white; padding:40px 0px 0px 0px; margin-left: 5%; font-size: 1.95312em;">Visual Configuration</h2>
				<div style="color:white; padding:40px 0px 0px 0px; margin-left: 5%">
					<b>Background Image: </b> <input type="file" name="backgroundImage" margin-top="-10px"/>
				</div>
				<div style="color:white; padding:40px 0px 0px 0px; margin-left: 5%">
					<b>Banner Logo: </b> <input type="file" name="bannerImage"/><br/>
					<b>Banner Color: </b> <input type="text" name="watsonBannerColor" style="color:black"/><br/>
					<b>Banner Description</b> <input type="text" name="watsonBannerDescription" style="color:black"/>
				</div>
				<div style="color:white; padding:40px 0px 0px 0px; margin-left: 5%">
					<b>Avatar Watson Image: </b> <input type="file" name="avatarImage"/><br/>
					<b>Avatar Watson Background Color: </b> <input type="text" name="watsonBackgroundColor" style="color:black"/><br/>
					<b>Avatar Watson Border Color</b> <input type="text" name="watsonBorderColor" style="color:black"/>
				</div>
				<div style="color:white; padding:40px 0px 0px 0px; margin-left: 5%">
					<b>Tab icon: </b> <input type="file" name="tabImage"/><br/>
					<b>Tab Name: </b> <input type="text" name="tabName" style="color:black"/><br/>
				</div>
			  </div>
			  <div class="col-sm-2">
				<h2 style="color:white; padding:40px 0px 0px 0px; margin-left: 5%; font-size: 1.95312em;">IDs Configuration</h2>
				<div style="color:white; padding:25px 0px 0px 0px; margin-left: 5%">
					<b>Classifier ID: </b> <input type="text" name="classifierID" style="color:black"/><br/>
					<b>Dialog ID: </b> <input type="text" name="dialogID" style="color:black"/><br/>
				</div>
			  </div>
			  <div style="padding:40px 0px 0px 0px; margin-left: 16%">
				<input id="update" type="button" value="Update" onclick="sendData()"><br/>
				<input id="refresh" type="button" value="Refresh" onclick="location.reload();">
			  </div>
			  </form>
			</div>
			<!-- Property template -->
			<div class="data--variable hidden">
				<span class="data--variable-title"></span> <span
					class="data--variable-value"></span>
			</div>
		</article>
	</div>


	<script
		src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script type="text/javascript" src="js/demo.js"></script>
	<script>
		function getConfig() {
			var url = "/getConfig";
			var http = new XMLHttpRequest();
			http.open("GET", url, true);
			  
			http.onreadystatechange = function() {
			    if (http.readyState == 4 && http.status == 200) {
					var values = JSON.parse(http.response);
					document.getElementById("banner").style = "width:920px;margin-left:auto;margin-right:auto;border-radius:20px;padding-left:30px; background-color: " + values.bannerColor + ";";
					document.getElementById("bannerDescription").innerHTML = values.bannerDescription;
					document.getElementById("avatar").style = "background-color:" + values.avatarBackgroundColor + "; border: 2px solid " + values.avatarBorderColor + ";";
					document.getElementById("title").innerHTML = values.title;
				}
			}
			http.send();
		}
		
		function sendData() {
		  var url = "/config";
          var http = new XMLHttpRequest();
          var params = new FormData(document.getElementById("uploadForm"));
          http.open("POST", url, true);
          document.getElementById('update').value = 'Updating...';
          document.getElementById('update').disabled = true;
          document.getElementById('refresh').disabled = true;
		  
          http.onreadystatechange = function() {
               if (http.readyState == 4 && http.status == 200) {
					getConfig();
					alert(http.responseText);
					document.getElementById('update').value = 'Update';
					document.getElementById('update').disabled = false;
					document.getElementById('refresh').disabled = false;
				}
		  }
          http.send(params);
		}
		
		getConfig();
	</script>
</body>
</html>
